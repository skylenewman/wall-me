pw.component.register("mutable",function(e,t){this.mutation=function(t){var o=pw.util.dup(t);delete o.__nested,delete o.scope,delete o.id;var n={};n[t.scope]=o;var a={action:"call_route",input:n};if("FORM"===e.node.tagName){var i,r=e.node.querySelector('input[name="_method"]');i=r?r.value:e.node.getAttribute("method"),a.method=i,a.uri=e.node.getAttribute("action")}var s=this;window.socket.send(a,function(e){if(302===e.status&&e.headers.Location!==window.location.pathname){var t=e.headers.Location;return void history.pushState({uri:t},t,t)}400===e.status||s.state.rollback(),pw.component.push({channel:"response:received",payload:{response:e}}),s.revert()})}});
